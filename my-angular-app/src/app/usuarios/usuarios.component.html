<div class="usuarios-container">
  <!-- Header -->
  <div class="header">
    <div class="header-content">
      <div class="header-icon">ğŸ‘¥</div>
      <div class="header-text">
        <h2>Mantenimiento de Usuarios</h2>
        <p>Gestiona los usuarios del sistema</p>
      </div>
    </div>
    <div class="user-count">
      <span class="count-number">{{ usuarios.length }}</span>
      <span class="count-label">Usuarios</span>
    </div>
  </div>

  <!-- Mensajes -->
  <div *ngIf="mensaje" [class]="getMensajeClass()">
    <span class="mensaje-icon">{{ getMensajeIcon() }}</span>
    <span>{{ mensaje }}</span>
  </div>

  <!-- Formulario -->
  <div class="form-card">
    <div class="form-header">
      <h3>
        <span *ngIf="!editMode">â• Nuevo Usuario</span>
        <span *ngIf="editMode">âœï¸ Editar Usuario</span>
      </h3>
    </div>
    
    <form (ngSubmit)="guardarUsuario()" #formUsuario="ngForm">
      <div class="form-grid">
        <div class="form-group">
          <label for="username">
            <span class="label-icon">ğŸ‘¤</span>
            Usuario
          </label>
          <input 
            type="text" 
            id="username"
            [(ngModel)]="usuarioForm.username" 
            name="username" 
            placeholder="Ingrese nombre de usuario"
            required 
            class="form-control" />
        </div>

        <div class="form-group">
          <label for="email">
            <span class="label-icon">ğŸ“§</span>
            Email
          </label>
          <input 
            type="email" 
            id="email"
            [(ngModel)]="usuarioForm.email" 
            name="email" 
            placeholder="usuario@ejemplo.com"
            required 
            class="form-control" />
        </div>

        <div class="form-group" *ngIf="!editMode">
          <label for="password">
            <span class="label-icon">ğŸ”’</span>
            ContraseÃ±a
          </label>
          <input 
            type="password" 
            id="password"
            [(ngModel)]="usuarioForm.password" 
            name="password" 
            placeholder="Ingrese contraseÃ±a"
            required 
            class="form-control" />
        </div>

        <div class="form-group" *ngIf="editMode">
          <label for="password">
            <span class="label-icon">ğŸ”</span>
            Nueva ContraseÃ±a (opcional)
          </label>
          <input 
            type="password" 
            id="password"
            [(ngModel)]="usuarioForm.password" 
            name="password" 
            placeholder="Dejar vacÃ­o para mantener la actual"
            class="form-control" />
        </div>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary">
          <span class="btn-icon">{{ editMode ? 'ğŸ’¾' : 'â•' }}</span>
          {{ editMode ? 'Actualizar Usuario' : 'Crear Usuario' }}
        </button>
        <button type="button" *ngIf="editMode" (click)="cancelarEdicion()" class="btn btn-secondary">
          <span class="btn-icon">âœ–ï¸</span>
          Cancelar
        </button>
      </div>
    </form>
  </div>

  <!-- Tabla de usuarios -->
  <div class="table-card">
    <div class="table-header">
      <h3>ğŸ“‹ Lista de Usuarios</h3>
      <div class="search-box">
        <input 
          type="text" 
          [(ngModel)]="searchText" 
          placeholder="ğŸ” Buscar usuario..."
          class="search-input">
      </div>
    </div>

    <div class="table-responsive">
      <table class="usuarios-table" *ngIf="usuarios.length > 0">
        <thead>
          <tr>
            <th class="th-id">ID</th>
            <th class="th-usuario">ğŸ‘¤ Usuario</th>
            <th class="th-email">ğŸ“§ Email</th>
            <th class="th-fecha">ğŸ“… Fecha CreaciÃ³n</th>
            <th class="th-acciones">âš™ï¸ Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let usuario of usuariosFiltrados()" class="table-row">
            <td class="td-id">{{ usuario.id }}</td>
            <td class="td-usuario">
              <div class="user-info">
                <div class="user-avatar">{{ usuario.username.charAt(0).toUpperCase() }}</div>
                <span class="user-name">{{ usuario.username }}</span>
              </div>
            </td>
            <td class="td-email">{{ usuario.email }}</td>
            <td class="td-fecha">
              <span class="fecha-badge">{{ usuario.fecha_creacion | date:'dd/MM/yyyy HH:mm' }}</span>
            </td>
            <td class="td-acciones">
              <button (click)="editarUsuario(usuario)" class="btn-action btn-edit" title="Editar usuario">
                <span class="btn-icon">âœï¸</span>
                <span class="btn-text">Editar</span>
              </button>
              <button (click)="eliminarUsuario(usuario.id!)" class="btn-action btn-delete" title="Eliminar usuario">
                <span class="btn-icon">ğŸ—‘ï¸</span>
                <span class="btn-text">Eliminar</span>
              </button>
            </td>
          </tr>
        </tbody>
      </table>

      <div *ngIf="usuarios.length === 0" class="empty-state">
        <div class="empty-icon">ğŸ“­</div>
        <h3>No hay usuarios registrados</h3>
        <p>Comienza creando tu primer usuario usando el formulario superior</p>
      </div>
    </div>
  </div>
</div>
